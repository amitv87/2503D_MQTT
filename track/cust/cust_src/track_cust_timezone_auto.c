/*******************************************************************************************
 * Filename:    
 * Author :     
 * Date :       
 * Comment:     
 ******************************************************************************************/

/****************************************************************************
*  Include Files                        包含头文件
*****************************************************************************/
#include "track_cust.h"

/*****************************************************************************
*  Define                               宏定义
******************************************************************************/

/*****************************************************************************
*  Typedef  Enum                        枚举定义
*****************************************************************************/

/*****************************************************************************
*  Struct                               数据结构定义
******************************************************************************/
typedef struct
{
    char        mcc[4];
    kal_uint8   zone;
    kal_uint8   time;
    kal_uint8   time_min;
} mcc_timezone_struct;

/*****************************************************************************
*  Local variable                       局部变量
*****************************************************************************/
static const mcc_timezone_struct mcc_timezone_list[] =
{
    {"460", 'E', 8, 0},
    {"426", 'E', 3, 0},
    {"414", 'E', 6, 30},
    {"450", 'E', 9, 0},
    {"440", 'E', 9, 0},
    {"404", 'E', 5, 30},
    {"510", 'E', 7, 0},
    {"432", 'E', 3, 30},
    {"470", 'E', 6, 0},
    {"418", 'E', 3, 0},
    {"425", 'E', 2, 0},
    {"416", 'E', 2, 0},
    {"456", 'E', 7, 0},
    {"419", 'E', 3, 0},
    {"457", 'E', 7, 0},
    {"415", 'E', 2, 0},
    {"502", 'E', 8, 0},
    {"472", 'E', 5, 0},
    {"674", 'E', 12, 0},
    {"429", 'E', 5, 0},
    {"422", 'E', 4, 0},
    {"410", 'E', 5, 0},
    {"515", 'E', 8, 0},
    {"427", 'E', 3, 0},
    {"420", 'E', 3, 0},
    {"401", 'E', 6, 0},
    {"400", 'E', 4, 0},
    {"525", 'E', 7, 30},
    {"413", 'E', 5, 0},
    {"417", 'E', 2, 0},
    {"520", 'E', 7, 0},
    {"421", 'E', 3, 0},
    {"286", 'E', 2, 0},
    {"424", 'E', 3, 0},
    {"452", 'E', 7, 0},
    {"276", 'E', 1, 0},
    {"250", 'E', 3, 0},
    {"247", 'E', 2, 0},
    {"213", 'E', 1, 0},
    {"293", 'E', 1, 0},
    {"232", 'E', 1, 0},
    {"206", 'E', 1, 0},
    {"259", 'E', 2, 0},
    {"530", 'E', 12, 0},
    {"266", 'E', 1, 0},
    {"280", 'E', 2, 0},
    {"230", 'E', 1, 0},
    {"238", 'E', 1, 0},
    {"370", 'W', 4, 0},
    {"244", 'E', 2, 0},
    {"208", 'E', 1, 0},
    {"262", 'E', 1, 0},
    {"202", 'E', 2, 0},
    {"216", 'E', 1, 0},
    {"274", 'E', 0, 0},
    {"272", 'E', 0, 0},
    {"222", 'E', 1, 0},
    {"295", 'E', 1, 0},
    {"270", 'E', 1, 0},
    {"278", 'E', 1, 0},
    {"204", 'E', 1, 0},
    {"242", 'E', 1, 0},
    {"260", 'E', 1, 0},
    {"268", 'E', 0, 0},
    {"226", 'E', 2, 0},
    {"231", 'E', 1, 0},
    {"214", 'E', 1, 0},
    {"240", 'E', 1, 0},
    {"228", 'E', 1, 0},
    {"234", 'E', 0, 0},
    {"220", 'E', 1, 0},
    {"310", 'W', 5, 0},
    {"311", 'W', 5, 0},
    {"316", 'W', 5, 0},
    {"302", 'W', 8, 0},
    {"702", 'W', 6, 0},
    {"724", 'W', 3, 0},
    {"730", 'W', 4, 0},
    {"368", 'W', 5, 0},
    {"704", 'W', 6, 0},
    {"738", 'W', 3, 0},
    {"372", 'W', 5, 0},
    {"708", 'W', 6, 0},
    {"338", 'W', 4, 0},
    {"334", 'W', 6, 0},
    {"714", 'W', 5, 0},
    {"716", 'W', 5, 0},
    {"748", 'W', 3, 0},
    {"722", 'W', 3, 0},
    {"736", 'W', 4, 0},
    {"730", 'W', 4, 0},
    {"732", 'W', 5, 0},
    {"740", 'W', 5, 0},
    {"744", 'W', 4, 0},
    {"734", 'W', 5, 0},
    {"505", 'E', 10, 0},
    {"615", 'E', 11, 0},
    {"603", 'E', 1, 0},
    {"655", 'E', 2, 0},
    {"631", 'E', 1, 0},
    {"642", 'E', 2, 0},
    {"624", 'E', 1, 0},
    {"622", 'E', 1, 0},
    {"612", 'E', 0, 0},
    {"629", 'E', 1, 0},
    {"602", 'E', 2, 0},
    {"611", 'E', 0, 0},
    {"639", 'E', 3, 0},
    {"618", 'E', 0, 0},
    {"646", 'E', 3, 0},
    {"610", 'E', 0, 0},
    {"617", 'E', 4, 0},
    {"604", 'E', 2, 0},
    {"614", 'E', 0, 0},
    {"624", 'E', 1, 0},
    {"608", 'E', 0, 0},
    {"637", 'E', 3, 0},
    {"634", 'E', 2, 0},
    {"640", 'E', 3, 0},
    {"615", 'E', 0, 0},
    {"605", 'E', 1, 0},
    {"243", 'E', 1, 0},
    {"645", 'E', 2, 0}
};

/****************************************************************************
*  Global Variable                      全局变量
*****************************************************************************/

/****************************************************************************
*  Global Variable - Extern             引用全局变量
*****************************************************************************/

/*****************************************************************************
*  Global Functions - Extern            引用外部函数
******************************************************************************/

/*****************************************************************************
*  Local Functions Define               本地函数声明
******************************************************************************/

#if 0
#endif /* 0 */
/*****************************************************************************
*  Local Functions                      本地函数
******************************************************************************/

/*****************************************************************************
*  Global Functions                     全局函数
******************************************************************************/

/******************************************************************************
 *  Function    -  track_mcc_to_timezone
 *
 *  Purpose     -  根据MCC值查找对应的时区
 *
 *  Description -  
 *
 *  modification history
 * ----------------------------------------
 * v1.0  , 29-07-2013,  Cml  written
 * ----------------------------------------
*******************************************************************************/
nvram_gps_time_zone_struct* track_mcc_to_timezone(void)
{
    char mcc[5] = {0};
    char *mcc_p;
    kal_uint8 i, mcc_max;
    static nvram_gps_time_zone_struct timezone = {0};
    mcc_p = track_drv_get_mcc_from_imsi();
    strcpy(mcc, mcc_p);
    mcc_max = sizeof(mcc_timezone_list) / sizeof(mcc_timezone_struct);
    for(i = 0; i < mcc_max; i++)
    {
        if(strcmp(mcc_timezone_list[i].mcc, mcc) == 0)
        {
            timezone.timezone_auto = G_parameter.zone.timezone_auto;
            timezone.zone = mcc_timezone_list[i].zone;
            timezone.time = mcc_timezone_list[i].time;
            timezone.time_min = mcc_timezone_list[i].time_min;
            LOGD(L_APP, L_V5, "timezone%c,%d:%d", timezone.zone, timezone.time, timezone.time_min);
            return &timezone;
        }
    }
    LOGD(L_APP, L_V5, "error");
    return NULL;
}

