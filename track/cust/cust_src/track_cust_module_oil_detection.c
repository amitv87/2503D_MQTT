#if defined(__OIL_DETECTION__)
/*******************************************************************************************
 * Filename:
 * Author :
 * Date :
 * Comment:
 ******************************************************************************************/

/****************************************************************************
*  Include Files                        包含头文件
*****************************************************************************/
#include "track_cust.h"

/*****************************************************************************
*  Define                               宏定义
******************************************************************************/

/*****************************************************************************
*  Typedef  Enum                        枚举定义
*****************************************************************************/

/*****************************************************************************
*  Struct                               数据结构定义
******************************************************************************/
typedef void (*Func_CustRecvPtr)(void);


/*****************************************************************************
*  Local variable                       局部变量
*****************************************************************************/

/****************************************************************************
*  Global Variable                      全局变量
*****************************************************************************/

/****************************************************************************
*  Global Variable - Extern             引用全局变量
*****************************************************************************/

/*****************************************************************************
*  Global Functions - Extern            引用外部函数
******************************************************************************/

/*****************************************************************************
*  Local Functions Define               本地函数声明
******************************************************************************/


/*****************************************************************************
*  Local Functions                      本地函数
******************************************************************************/

void track_cust_oil_send_data(void)
{
    kal_uint8 data[] = {0x68, 0x53, 0x59 , 0x01 , 0x02 , 0x17};
    LOGD(L_APP, L_V4, "");

    track_drv_uart1_write_data(&data, 6);
    if(G_realtime_data.netLogControl == 512)
    {
        cust_packet_log_data(8, "track_cust_oil_send_data", strlen("track_cust_oil_send_data"));
    }
}


void track_cust_oil_data_to_server(kal_uint8 *data, int len)
{
    LOGD(L_APP, L_V4, "");

   track_cust_paket_94(0x0D,data,len);
}

/******************************************************************************
 *  Function    -  track_cust_oil_main
 * 
 *  Purpose     -  定时读取油量，接收解析后上报服务器
 * 
 *  Description -   
 * 
 * modification history
 * ----------------------------------------
 * v1.0  , 2017-07-04,  chengjun  written
 * ----------------------------------------
 ******************************************************************************/
void track_cust_oil_main(void)
{
    LOGD(L_APP, L_V4, "");

    if(G_parameter.oil.sw)
    {
        if(G_parameter.oil.timer > 0)
        {
            tr_start_timer(TRACK_CUST_OIL_TIMER_ID, G_parameter.oil.timer * 1000, track_cust_oil_main);
            track_cust_oil_send_data();
        }
    }
}
#endif /* __OIL_DETECTION__ */

